name: "Lock Update"
on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *' #every day

jobs:
  CI:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - uses: DeterminateSystems/nix-installer-action@main

    - run: git config user.name github-actions && git config user.email github-actions@github.com
    # exclude nixpkgs-network-pr
    - run: |
        nix flake lock --commit-lock-file \
        --update-input nixpkgs \
        --update-input hydra \
        --update-input impermanence \
        --update-input home-manager \
        --update-input darwin \
        --update-input agenix \
        --update-input nix-index-database     
    - run: git push

